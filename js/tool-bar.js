customElements.get("tool-bar")||customElements.define("tool-bar",class extends HTMLElement{constructor(){super(),this.VISIBILITY_DURATION=3e3,this.ifShow=!1,this.ifHoveringIn=!1,this.ifToTopShow=!1,this.toTop=this.querySelector(".to-top"),this.progressSvgInited=!1,this.initProgressSvg(),this.toTop.addEventListener("click",this.scrollToTop.bind(this)),window.addEventListener("scroll",this.onScroll.bind(this)),this.addEventListener("mouseenter",this.onMouseEnter.bind(this)),this.addEventListener("mouseleave",this.onMouseLeave.bind(this)),this.show()}show(){this.ifShow||this.classList.remove("tool-bar--collapse"),this.ifShow=!0,this.timer&&clearTimeout(this.timer),!this.ifHoveringIn&&(this.timer=setTimeout(this.hide.bind(this),this.VISIBILITY_DURATION))}hide(){this.ifShow&&this.classList.add("tool-bar--collapse"),this.ifShow=!1}onScroll(){this.show(),this.calculateScrollPercentage()}onMouseEnter(){this.ifHoveringIn=!0,this.show()}onMouseLeave(){this.ifHoveringIn=!1,this.timer=setTimeout(this.hide.bind(this),1e3)}initProgressSvg(){if(this.progressSvgInited)return;const path=this.toTop.querySelector(".border-progress path");this.pathLength=path.getTotalLength(),path.setAttribute("stroke-dasharray",this.pathLength),path.setAttribute("stroke-dashoffset",this.pathLength),this.progressSvgInited=!0}calculateScrollPercentage(){if(!this.progressSvgInited)return;const scrollTop=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,windowHeight=window.innerHeight,scrollableHeight=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)-windowHeight,scrollPercentage=Math.min(100,scrollTop/scrollableHeight*100);scrollPercentage>10?(this.ifToTopShow||this.classList.add("to-top-active"),this.ifToTopShow=!0):(this.ifToTopShow&&this.classList.remove("to-top-active"),this.ifToTopShow=!1),this.toTop.querySelector(".border-progress path")?.setAttribute("stroke-dashoffset",this.pathLength*(100-scrollPercentage)/100)}scrollToTop(event){event.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})}});
//# sourceMappingURL=/cdn/shop/t/2/assets/tool-bar.js.map?v=18268592657718747131730604924
